<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="description"
	content="Tizen Wearable PDF viewer by vlack" />
<title>PDFview</title>
<link rel="stylesheet" type="text/css"
	href="lib/tau/wearable/theme/changeable/tau.min.css" />
<link rel="stylesheet" type="text/css"
	href="lib/tau/wearable/theme/changeable/tau.circle.min.css" />
<style>
.doc-arrow {
	width: 49vw;
	border: 0;
	padding: 0 20px;
	margin: 0;
	height: 50px;
	color: black;
	background-color: white;
}

.pdf-page {
	
}
</style>
</head>

<body>
	<div id="main" class="ui-page">
		<header class="ui-header ui-has-more">
			<h2 class="ui-title">PDFview</h2>
		</header>
		<div class="ui-content">
			<ul class="ui-listview" id="files-list">
			</ul>
		</div>
	</div>
	<div id="pdf" class="ui-page">
		<div style='background-color: white; overflow-y: overlay;'>
			<script src="lib/pdfjs/pdf.js"></script>
			<div>
				<button id="prev" class="doc-arrow" style="text-align: right">&lt;</button>
				<button id="next" class="doc-arrow" style="text-align: left">&gt;</button>
				<div style="font-size: 0.8em; text-align: center;">
					Page: <span id="page_num"></span> / <span id="page_count"></span>
				</div>
			</div>
			<div style="overflow-x: overlay;">
				<canvas id="the-canvas"></canvas>
			</div>
		</div>
	</div>
	<div id="pdf-preview" class="ui-page" data-enable-page-scroll="false">
		<header class="ui-header ui-header-big">
			<h2 class="ui-title">Select page</h2>
		</header>
		<div class="ui-content">
			<canvas id="canvas-pdf-preview"
				style="position: fixed; margin-left: 0px"></canvas>
			<div style="margin-left: -100px">
				<label> Page <input type="number" max="3" min="1" step="1"
					value="1" id="page-number-picker" />
				</label>
			</div>
		</div>
		<footer class="ui-footer ui-bottom-button ui-fixed">
			<button class="ui-btn ui-number-picker-set" onclick="openPage()">Open</button>
		</footer>
	</div>
	<div id="loading-popup" class="ui-popup">
		<div class="ui-popup-content">
			<div class="small-processing-container" style="margin-top: 50px">
				<div class="ui-processing" style="opacity: 1"></div>
				<div class="ui-processing-text">Loading document</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
(function () {
	window.addEventListener("tizenhwkey", function (ev) {
		var activePopup = null,
			page = null,
			pageId = "";

		if (ev.keyName === "back") {
			activePopup = document.querySelector(".ui-popup-active");
			page = document.getElementsByClassName("ui-page-active")[0];
			pageId = page ? page.id : "";

			if (pageId === "main" && !activePopup) {
				try {
					tizen.application.getCurrentApplication().exit();
				} catch (ignore) {
				}
			} else {
				if (pageId === "pdf"){
					document.getElementsByTagName('meta')['viewport'].content = "width=device-width, initial-scale=1.0, user-scalable=no";
					window.removeEventListener("rotarydetent", onBezelPageChange);
				}
				if (pageId === "pdf-preview"){
					if (pdf_page_picker_widget != null){
				    	pdf_page_picker_widget.destroy();
				    }
				    if (watch_page_interval){
				    	clearInterval(watch_page_interval);
				    }
				}
				window.history.back();
			}
		}
	});
}());
</script>
	<script type="text/javascript" src="lib/tau/wearable/js/tau.min.js"></script>
	<script src="files.js"></script>
	<script type="text/javascript" src="pdfview.js"></script>
</body>
</html>
